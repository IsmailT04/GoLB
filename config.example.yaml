# Env overrides (12-factor): LB_PORT, AUTH_TOKEN, CERT_FILE, KEY_FILE, GOLB_STRATEGY, REDIS_ADDR, REDIS_PASSWORD, REDIS_DB

lb_port: 8080
strategy: "weighted-round-robin"

enable_auth: true
auth_token: "my-secret"

enable_ratelimit: true
rate_limit_per_min: 5

enable_cache: true

# Redis (distributed rate limit + cache). Default addr: localhost:6379
redis_addr: "localhost:6379"
# redis_password: ""
# redis_db: 0

# TLS: set both to enable HTTPS (or use CERT_FILE / KEY_FILE env vars)
# cert_file: "/etc/golb/tls.crt"
# key_file: "/etc/golb/tls.key"

backends:
  - url: "http://localhost:8081"
    weight: 1
    max_consecutive_failures: 3
  - url: "http://localhost:8082"
    weight: 3
    max_consecutive_failures: 3
  - url: "http://localhost:8083"
    weight: 1
    max_consecutive_failures: 3
